# Scripts Directory

ì´ ë””ë ‰í† ë¦¬ëŠ” í”„ë¡œì íŠ¸ ê´€ë¦¬ ë° ë°°í¬ë¥¼ ìœ„í•œ ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.

## ğŸ“ í˜„ì¬ ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡

### ğŸ¦€ **SQLx ë§ˆì´ê·¸ë ˆì´ì…˜ (ìƒˆë¡œìš´ ì‹œìŠ¤í…œ)**
- **`sqlx-migrate.sh`** - SQLx ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸
  - ìƒˆë¡œìš´ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±, ë¡œì»¬/ì„œë²„ ì ìš©, ìƒíƒœ í™•ì¸, ë¡¤ë°± ë“±

### ğŸ”„ **ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ (í•˜ìœ„ í˜¸í™˜ì„±)**
- **`apply-migrations.sh`** - ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤ì„ ë¡œì»¬/ì„œë²„ì— ì ìš©
- **`generate-migration.sh`** - ìƒˆë¡œìš´ ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±

### ğŸ—„ï¸ **ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬**
- **`sync-database.sh`** - ë¡œì»¬ê³¼ ì„œë²„ ê°„ ë°ì´í„°ë² ì´ìŠ¤ ë™ê¸°í™”
- **`backup-database.sh`** - ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ìƒì„±
- **`cleanup-backups.sh`** - ì˜¤ë˜ëœ ë°±ì—… íŒŒì¼ ì •ë¦¬
- **`seed-database.sh`** - ë°ì´í„°ë² ì´ìŠ¤ì— ì´ˆê¸° ë°ì´í„° ì‚½ì…

### ğŸ” **í™˜ê²½ ì„¤ì • ê´€ë¦¬**
- **`backup-env.sh`** - .env íŒŒì¼ ë°±ì—… ë° ë³µêµ¬

### âš™ï¸ **ì„œë²„ ì„¤ì •**
- **`setup-new-server-env.sh`** - ìƒˆë¡œìš´ ì„œë²„ í™˜ê²½ ì´ˆê¸° ì„¤ì •

## ğŸš€ ì‚¬ìš©ë²•

### SQLx ë§ˆì´ê·¸ë ˆì´ì…˜ (ê¶Œì¥)
```bash
# ìƒˆë¡œìš´ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
./scripts/sqlx-migrate.sh add "ë§ˆì´ê·¸ë ˆì´ì…˜_ì„¤ëª…"

# ë¡œì»¬ì— ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©
./scripts/sqlx-migrate.sh run

# ì„œë²„ì— ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©
./scripts/sqlx-migrate.sh server-run

# ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ í™•ì¸
./scripts/sqlx-migrate.sh info
./scripts/sqlx-migrate.sh server-info
```

### ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ (í•˜ìœ„ í˜¸í™˜ì„±)
```bash
# ìƒˆë¡œìš´ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
./scripts/generate-migration.sh 001 "ë§ˆì´ê·¸ë ˆì´ì…˜_ì„¤ëª…"

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©
./scripts/apply-migrations.sh local    # ë¡œì»¬ë§Œ
./scripts/apply-migrations.sh remote   # ì„œë²„ë§Œ
./scripts/apply-migrations.sh both     # ë‘˜ ë‹¤
```

### ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
```bash
# ë°ì´í„°ë² ì´ìŠ¤ ë™ê¸°í™”
./scripts/sync-database.sh

# ë°±ì—… ìƒì„±
./scripts/backup-database.sh

# ë°±ì—… ì •ë¦¬
./scripts/cleanup-backups.sh

# ì´ˆê¸° ë°ì´í„° ì‚½ì…
./scripts/seed-database.sh
```

### í™˜ê²½ ì„¤ì • ê´€ë¦¬
```bash
# .env íŒŒì¼ ìƒíƒœ í™•ì¸
./scripts/backup-env.sh check

# .env íŒŒì¼ ë°±ì—…
./scripts/backup-env.sh backup

# .env íŒŒì¼ ë³µêµ¬
./scripts/backup-env.sh restore

# ë¡œì»¬ .envë¥¼ ì„œë²„ì— ë™ê¸°í™”
./scripts/backup-env.sh sync
```

### ì„œë²„ ì„¤ì •
```bash
# ìƒˆ ì„œë²„ í™˜ê²½ ì„¤ì •
./scripts/setup-new-server-env.sh
```

## ğŸ“‹ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œìŠ¤í…œ ë¹„êµ

### SQLx ë§ˆì´ê·¸ë ˆì´ì…˜ (ê¶Œì¥)
- âœ… **íƒ€ì… ì•ˆì „ì„±**: ì»´íŒŒì¼ íƒ€ì„ì— SQL ê²€ì¦
- âœ… **ìë™ ì¶”ì **: ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ ìë™ ê´€ë¦¬
- âœ… **ë¡¤ë°± ì§€ì›**: ì•ˆì „í•œ ë˜ëŒë¦¬ê¸°
- âœ… **IDE ì§€ì›**: Rust IDEì—ì„œ SQL í•˜ì´ë¼ì´íŒ…
- âœ… **ìë™í™”**: GitHub Actionsì™€ ì™„ë²½ í†µí•©

### ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ (í•˜ìœ„ í˜¸í™˜ì„±)
- âœ… **í˜¸í™˜ì„±**: ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ë“¤ê³¼ì˜ í˜¸í™˜ì„±
- âœ… **ë‹¨ìˆœí•¨**: ê°„ë‹¨í•œ SQL íŒŒì¼ ê¸°ë°˜
- âœ… **ìœ ì—°ì„±**: ë³µì¡í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œì§ ê°€ëŠ¥

## ğŸ”„ ë°°í¬ ì›Œí¬í”Œë¡œìš°

### ìë™ ë°°í¬ (GitHub Actions)
1. ì½”ë“œ ë³€ê²½ì‚¬í•­ ì»¤ë°‹ ë° í‘¸ì‹œ
2. GitHub Actionsê°€ ë³€ê²½ì‚¬í•­ ê°ì§€
3. í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë§Œ ìë™ ë°°í¬
4. SQLx ë§ˆì´ê·¸ë ˆì´ì…˜ ìë™ ì ìš©

### ìˆ˜ë™ ë°°í¬
```bash
# íŠ¹ì • ì»´í¬ë„ŒíŠ¸ë§Œ ë°°í¬
./scripts/sqlx-migrate.sh server-run  # DBë§Œ
# ë˜ëŠ” GitHub Actionsì˜ manual-deploy.yml ì‚¬ìš©
```

## ğŸ“ ì°¸ê³ ì‚¬í•­

- ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹¤í–‰ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤: `chmod +x scripts/*.sh`
- ì„œë²„ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ëŠ” SSH í‚¤ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤
- ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ëŠ” PostgreSQL í´ë¼ì´ì–¸íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤
- SQLx ë§ˆì´ê·¸ë ˆì´ì…˜ì€ Rust í™˜ê²½ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤

## ğŸ—‚ï¸ íŒŒì¼ êµ¬ì¡°

```
scripts/
â”œâ”€â”€ sqlx-migrate.sh          # SQLx ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬
â”œâ”€â”€ apply-migrations.sh      # ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©
â”œâ”€â”€ generate-migration.sh    # ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
â”œâ”€â”€ sync-database.sh         # DB ë™ê¸°í™”
â”œâ”€â”€ backup-database.sh       # DB ë°±ì—…
â”œâ”€â”€ cleanup-backups.sh       # ë°±ì—… ì •ë¦¬
â”œâ”€â”€ seed-database.sh         # ì´ˆê¸° ë°ì´í„° ì‚½ì…
â”œâ”€â”€ backup-env.sh            # .env íŒŒì¼ ë°±ì—…/ë³µêµ¬
â”œâ”€â”€ setup-new-server-env.sh  # ì„œë²„ í™˜ê²½ ì„¤ì •
â””â”€â”€ README.md               # ì´ íŒŒì¼
``` 